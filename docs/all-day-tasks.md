# 終日タスクの仕様

Taskwatch では終日タスク（時間帯を指定しない予定）を登録できます。使用感を揃えるため、以下のルールを設けています。

## 登録・表示

- カレンダーの「時間を指定しない（終日）」トグルをオンにすると終日タスクとして保存されます。
- 終日タスクはカレンダー画面で日付ヘッダー直下のピルとして表示され、時間割グリッドには描画されません。
- タスク詳細・タイムライン・マイページの未評価リストでは「終日」とラベル表示されます。

## 経験値と統計

- 実装上は「60 分分のタスク」として扱います。1 日丸ごとの所要時間を与えると他指標が極端になるため、終日日数に関係なく 60 分で計上します。
- 終日タスクを完了すると `60 × XP_PER_MINUTE (現在 2)` で **120 XP** を獲得します。未達成にすると通常の `XP_PENALTY_MISSED (現在 20)` を減点します。
- 週間サマリやランキングも同じ換算を用いており、1 タスク = 60 分として `totalMinutes` やグラフに反映されます。

## マイページ未評価リスト

- 終日タスクも日付が変わったタイミングで未評価リストへ追加されます。評価フローは時間指定タスクと同じです。

## 実装メモ

- 終日フラグは `events.is_all_day / occurrences.is_all_day` に保持します。
- 換算値は `lib/stats.ts` の `ALL_DAY_EFFECTIVE_MINUTES` を変更すれば調整できます。
